# 原型开发计划（M1-M3）

## 目标
在 Windows 首版完成“扫描 + 倒排索引 + 检索 + 基础去重 + 配置页雏形”，默认仅倒排检索，ChromaDB 预留可选（默认关闭），OFD 暂不支持，云厂商配置提供模板与连接测试（默认关闭）。

## M1（2-3 周）
- Tauri 项目骨架（React/Vue 二选一），建立命令与事件通信层。
- Scanner（Rust）：遍历分区、排除系统目录、采集 FileMeta，支持并发与大小限制。
- Indexer（Rust + tantivy + cjieba）：
  - Schema 与权重；
  - 文本/文档解析（PDF/Office 初步）侧车进程；
  - 写入倒排索引；
- 搜索页基础 UI：搜索框/结果列表/详情侧栏（先文本预览）。
- 去重基础：精确重复（SHA-256），分组展示。
- 配置读取与保存（config.json）。

交付：可搜索文本与文档内容；结果高亮与分数；去重分组展示。

## M2（2 周）
- 解析增强：PDF（PyMuPDF）、Office（docx/xlsx/pptx）。
- ASR（Whisper.cpp）与 OCR（Tesseract）可选开启（默认关闭）；图片与视频音频文本化入索引（开启时）。
- 向量：接入 ChromaDB（本地，默认关闭）；嵌入依赖本地或云端模型（后续版本再启用）。
- 混合检索：BM25 + cosine 线性融合（开启向量时可用）；过滤器与排序。
- 重复近重：图片 pHash；基础清理策略与回收站。

交付：默认混合搜索；可选开启识别增强；近重图片识别与清理。

## M3（2 周）
- 模型与云厂商：配置页支持豆包/阿里/腾讯，提供连接测试（默认关闭，后续再启用）；
- 图像描述（LLaVA via Ollama）与向量检索整合；
- 索引状态页与任务队列；
- 稳定性与性能优化（批量写入、断点续建、限流）。

交付：稳定的混合搜索与可选云端增强；任务状态可视化。

## 成功标准
- 百万级文件索引，查询响应 <200ms（已建索引）；
- 重复清理安全（默认回收站）；
- 配置流程顺畅（连接测试与默认模板）。